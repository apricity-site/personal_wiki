<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>从0到1实现CI/CD | APRICITY</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="个人知识库">
    
    <link rel="preload" href="/personal_wiki/assets/css/0.styles.65ccb39f.css" as="style"><link rel="preload" href="/personal_wiki/assets/js/app.d60e7411.js" as="script"><link rel="preload" href="/personal_wiki/assets/js/2.487a0e24.js" as="script"><link rel="preload" href="/personal_wiki/assets/js/17.88091353.js" as="script"><link rel="prefetch" href="/personal_wiki/assets/js/10.83cc57ab.js"><link rel="prefetch" href="/personal_wiki/assets/js/11.342c6dde.js"><link rel="prefetch" href="/personal_wiki/assets/js/12.fb7b3bce.js"><link rel="prefetch" href="/personal_wiki/assets/js/13.ad4f0c53.js"><link rel="prefetch" href="/personal_wiki/assets/js/14.1e7cab5b.js"><link rel="prefetch" href="/personal_wiki/assets/js/15.cbdbc27a.js"><link rel="prefetch" href="/personal_wiki/assets/js/16.1ba1c252.js"><link rel="prefetch" href="/personal_wiki/assets/js/18.3285ccaa.js"><link rel="prefetch" href="/personal_wiki/assets/js/19.9da75aa9.js"><link rel="prefetch" href="/personal_wiki/assets/js/20.f2217f22.js"><link rel="prefetch" href="/personal_wiki/assets/js/3.131c70a8.js"><link rel="prefetch" href="/personal_wiki/assets/js/4.b5c5d85a.js"><link rel="prefetch" href="/personal_wiki/assets/js/5.aedbb9bc.js"><link rel="prefetch" href="/personal_wiki/assets/js/6.7dd3e1f3.js"><link rel="prefetch" href="/personal_wiki/assets/js/7.c597da36.js"><link rel="prefetch" href="/personal_wiki/assets/js/8.518a8b15.js"><link rel="prefetch" href="/personal_wiki/assets/js/9.8d4d5d94.js">
    <link rel="stylesheet" href="/personal_wiki/assets/css/0.styles.65ccb39f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/personal_wiki/" class="home-link router-link-active"><!----> <span class="site-name">APRICITY</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="读书笔记" class="dropdown-title"><span class="title">读书笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="读书笔记" class="mobile-dropdown-title"><span class="title">读书笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/personal_wiki/book/rabbitmq-in-action-guide/" class="nav-link">
  rabbitmq实战指南
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="课程笔记" class="dropdown-title"><span class="title">课程笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="课程笔记" class="mobile-dropdown-title"><span class="title">课程笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/personal_wiki/course/ci-cd/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  CI/CD
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/personal_wiki/tools/vagrant/get_startting.html" class="nav-link">
  vagrant
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="读书笔记" class="dropdown-title"><span class="title">读书笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="读书笔记" class="mobile-dropdown-title"><span class="title">读书笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/personal_wiki/book/rabbitmq-in-action-guide/" class="nav-link">
  rabbitmq实战指南
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="课程笔记" class="dropdown-title"><span class="title">课程笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="课程笔记" class="mobile-dropdown-title"><span class="title">课程笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/personal_wiki/course/ci-cd/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  CI/CD
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/personal_wiki/tools/vagrant/get_startting.html" class="nav-link">
  vagrant
</a></li></ul></div></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="从0到1实现ci-cd"><a href="#从0到1实现ci-cd" class="header-anchor">#</a> 从0到1实现CI/CD</h1> <h2 id="基本概念"><a href="#基本概念" class="header-anchor">#</a> 基本概念</h2> <ul><li><p>CI</p> <p><strong>持续构建</strong> 。负责拉取代码库中的代码后，执行用户预置定义好的操作脚本，通过一系列编译操作构建出一个 <strong>制品</strong> ，并将制品推送至到制品库里面。常用工具有<code>Gitlab CI</code>，<code>Github CI</code>，<code>Jenkins</code>等。这个环节不参与部署，只负责构建代码，然后保存构建物。构建物被称为 制品，保存制品的地方被称为 <strong>制品库</strong></p></li> <li><p>CD</p> <p><strong>两层含义： 持续部署（Continuous Deployment） 和持续交付（Continuous Delivery）</strong> 。</p> <p><strong>持续交付：</strong> 将制品库的制品拿出后，部署在测试环境 / 交付给客户提前测试。</p> <p><strong>持续部署：</strong> 将制品部署在生产环境。</p> <p><strong>工具：</strong> Ansible 批量部署， Docker 直接推拉镜像等等。当然也包括我们后面要写到的 Kubernetes 集群部署。</p></li></ul> <h2 id="流程描述"><a href="#流程描述" class="header-anchor">#</a> 流程描述</h2> <p><img src="/course/ci-cd/cd-ci.awebp" alt=""></p> <ol><li>写完了代码，提交到了 <code>Git</code> 代码库</li> <li>随后，代码库配置的 <code>WebHook</code> 钩子或人工手动启动了 <code>Jenkins</code> 的构建流程</li> <li><code>Jenkins</code> 启动构建流程。按照你之前配置好的构建脚本，将代码编译成功。</li> <li>编译成功后，将编译后的文件打包为 <code>docker</code> 镜像，并将镜像上传到私有镜像库。</li> <li>随后，使用 <code>kubectl</code> 指定远程的k8s集群，发送镜像版本更新指令</li> <li>远程的k8s集群接收到指令后，去镜像库拉取新镜像</li> <li>镜像拉取成功，按照升级策略（滚动升级）进行升级，此时不会停机。</li> <li>升级完毕。</li></ol> <h2 id="学习用服务器推荐方案"><a href="#学习用服务器推荐方案" class="header-anchor">#</a> 学习用服务器推荐方案</h2> <table><thead><tr><th>配置</th> <th>技术栈</th> <th>类型</th> <th>标签</th></tr></thead> <tbody><tr><td>2核4G</td> <td>Jenkins + Nexus + Docker</td> <td>本地虚拟机 / Cloud</td> <td>构建机</td></tr> <tr><td>2核4G</td> <td>Docker + Kubernetes</td> <td>本地虚拟机 / Cloud</td> <td>Kubernetes Master</td></tr> <tr><td>1核1G</td> <td>Docker + Kubernetes</td> <td>本地虚拟机 / Cloud</td> <td>Kubernetes Node</td></tr></tbody></table> <h2 id="目录"><a href="#目录" class="header-anchor">#</a> 目录</h2></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/personal_wiki/assets/js/app.d60e7411.js" defer></script><script src="/personal_wiki/assets/js/2.487a0e24.js" defer></script><script src="/personal_wiki/assets/js/17.88091353.js" defer></script>
  </body>
</html>
